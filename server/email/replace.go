package main

import (
	"fmt"
	"strconv"
	"strings"
)

var CharacterReplacements = map[rune]string{
	'⚀': `iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAzAAAAMwB6wBQKQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACASURBVDiNxZMxDoMwEARnI0p+kkdFPCyioKDLO/yB/IQGpVgKjg4TjAtWsryWfaM9WSfAVKiJfQK+hbVPoCUSJNuULCABftTEB7gf0OQuJAno4tg7Gj8NAF7AO/wPGPYeHbUwZ/y5BLZHSXP4TzHgX+Gm+7+xGiDWWbg8TBvgshaq9UQPZWBtTgAAAABJRU5ErkJggg==`,
	'⚁': `iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAzAAAAMwB6wBQKQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACySURBVDiNpZM9CsJAEIW/JykFCxEP4QXEE1h7HLHT81jnBgZM6yHEFBbWvhRuQDeIm/XBMrAz881jfwSYP1SE+AAuA3sXwJjgoLLNkAVUgEep4yTtJZ0lrePcTwfAPNQZqHMc3EIDwPE9UfRr+7L9lLQCprabwYAAMdDE+8mH+E09gKRJNkDSFrhLOklKchcXbUJcArMcwA6ogYPtawrg4xZsl0CZ0thJvF5X9mfqANlqASfBawjBdkJjAAAAAElFTkSuQmCC`,
	'⚂': `iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAzAAAAMwB6wBQKQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADSSURBVDiNpZM/DgFhEMV/T5QShYhDuIA4gdoFxDVExzVEodCp3YCE1iHENhKNKJ7Ct8vuBmu95Ms3k5l58+b7I8D8gWrYL8Dhx9o2UCMo2NrmlwVsAVeKtpM0kbST1MvGvioAWiHPwL6MglMoAFi9Bqr53ESygGFw50AXaNiOChEAA2AW7JvtBRBlkz6NcH1jp5BTIKlu+2x7KekKYHuVL30iuQVgFPwNUCnzDvph7wDNT11jZAnGwB6Y2j4WIUidge01sC5SGEM8Zi79mWKC0rgDZmeTUFJpihQAAAAASUVORK5CYII=`,
	'⚃': `iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAzAAAAMwB6wBQKQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAC6SURBVDiNpZNBCoMwEEXfly4LbgQP0YvkTN3mPj2GCLr1FK4K3U8XnZY0akAdCCF/kjeTmUSAccIuPr+AaefZG3DFM+jNjD0D6AGrUqSkIGmQFPNwkqL7Qu77ZQCMvjagTaK1iT5uZgA8fO6BOdFn19I9ywycXBfuXRdrAGBmz1wr+RaAvbYASGokaUWXpKYIkHTnU7BOUpXoFdABs+/5s1NtzAEBGIC40oHovrAJOPKU5YDDn+kLOGxvOv/PG8kPJ5gAAAAASUVORK5CYII=`,
	'⚄': `iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAzAAAAMwB6wBQKQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAADNSURBVDiNpZNBCsIwEEXfL10KboQewov0EoJ4jG5zGHe9hoV26ym6Etx0NW6mEqOBtg4MyfxJfj4/iQDjjyh9fAL3lXuPwA5X0JkZaxLoACtiSkm1pF5SSI+TFLxXp723AmDw2oAqOq2K8CGrAGh97IAxwkfH4jXfCpz5AMjz4jnXh9SDrInAOZJ9WmRiElNm/hFlCkjam9nDzK6SJgAza+Ne1gOg8foGFJHcwjEDmqwHbLjGlKAGeiD8MC14r150C0ufspxg82eaCTbHCxCO9fliEG8LAAAAAElFTkSuQmCC`,
	'⚅': `iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAzAAAAMwB6wBQKQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAD4SURBVDiNpZNBagJBEEVfSxgQdUY3MsvgNp7CnRdwn008kzfwAgFXrr1ALhEIaBA0o6aymD9QNhPBsWAo6v+qms/v7gAYD8ST8h74uHP2BegiBRszA+gAM2BkZvgPGInrqN5U6v2CpeovoO2G28IMWPoFrUjWUDkFEocnwnzPlQdVvAJzYG1muwo0s10IYQpMgIUfiBUcgS2lqXHsxR1jwnuwUn0Aes6DvjAD3m958KN8Bn4dfhHme2oVDIA3YFxzjGNxg1sKUuAZyGs8yMWlMeEVrFWfgMz9PRNmlCf0r4JP5W+gcHghzPfUKrj7KgctaPyYqgWN4w9DnKZPrDFlvQAAAABJRU5ErkJggg==`,
}

func ReplaceCharactersWithCidImg(in string, replacements map[rune]string) (
	result string, found []rune) {
	result = in
	for r, _ := range replacements {
		original := result
		result = strings.Replace(
			result, string(r), RuneReplacementCidImg(r), -1)
		if result != original {
			found = append(found, r)
		}
	}
	return
}

func RuneReplacementCidImg(r rune) string {
	return fmt.Sprintf(
		`<img src="cid:%s" style="vertical-align:bottom;" alt="%s" />`,
		RuneCid(r), string(r))
}

func RuneCid(r rune) string {
	return fmt.Sprintf(`charreplace%s@brdg.me`, strconv.Itoa(int(r)))
}
